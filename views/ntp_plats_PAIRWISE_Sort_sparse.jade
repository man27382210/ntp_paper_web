extends layout

block body_content
	.page_use
		table(cellpadding="0" cellspacing="0" border="0" class="display" id="demo")

	script.

		$(function(){
			var dataSetUse = !{JSON.stringify(ctrl_plats)};
			var plat_list = dataSetUse["plat_origin_list"];
			var cr_plats = dataSetUse["cr_plats"];

			var columns = [];
			var columnDefs = [];
			columns.push({ "title": "議員名字"});
			columnDefs.push({ "width": "10%", "targets": 0 });
			for (var i =0 ; i<638; i++){
				columns.push({ "title": plat_list[i]});
				columnDefs.push({ "width": "10%", "targets": i+1});
			}
			var table = $('#demo').dataTable({
				"data": cr_plats,
				"iDisplayLength": cr_plats.length,
				"width": '90%',
				"columnDefs": columnDefs,
				"columns": columns
			});
			$('#demo tbody').on( 'click', 'tr', function () {
				if ( $(this).hasClass('selected') ) {
					$(this).removeClass('selected');
				}
				else {
					table.$('tr.selected').removeClass('selected');
					$(this).addClass('selected');
				}
			});
		});

		