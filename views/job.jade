extends layout

block body_content

	#job_rotation
		.job_content
			.job_header
				img.job_company_photo
				h1 #{ctrl_job.title}
			.job_detail
				.job_detail_item
					.job_detail_title 需求人數：
						span.job_detail_content #{ctrl_job.count}
					.job_detail_title 主辦單位：
						span.job_detail_content #{ctrl_job.owner}
					.job_detail_title 簡介：
						p.job_intro.job_detail_content
							| #{ctrl_job.description}
					.job_detail_title 薪資
						span.job_detail_content #{ctrl_job.salary}
					.job_detail_title 公司網址：
						a.job_detail_content(href="#{ctrl_job.url}") #{ctrl_job.url}
					.job_detail_title 電子郵件：
						a.job_detail_content(href="#{ctrl_job.email}") #{ctrl_job.email}
					script.
						htmlNl2Para(".job_intro");
						parseURL(".job_intro");
			//- #address #{ctrl_job.place}
			//- #google_map

block body_script
	//- script(src="http://maps.google.com/maps/api/js?sensor=false")
	//- script(src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js")
	//- script.
	//- 	google.maps.job.addDomListener(window, 'load', function() {
	//- 		var address = $('#address').html();

	//- 		// Get location first
	//- 		var data_location = {
	//- 			address: address,
	//- 			sensor: 'false'
	//- 		}
	//- 		$.ajax({
	//- 			url: 'http://maps.googleapis.com/maps/api/geocode/json',
	//- 			type: 'GET',
	//- 			dataType: 'html',
	//- 			data: data_location,
	//- 			async: false,
	//- 			success: function(data) {
	//- 				var json = $.parseJSON(data);
	//- 				var lat = json.results[0].geometry.location.lat;
	//- 				var lng = json.results[0].geometry.location.lng;

	//- 				// Draw the map
	//- 				console.log('Draw:', lat, lng);
	//- 				var map = new google.maps.Map(document.getElementById('google_map'), {
	//- 					zoom: 17,
	//- 					center: new google.maps.LatLng(lat, lng)
	//- 				});

	//- 				// Draw Marker
	//- 				var mapMarker = new google.maps.Marker({
	//- 					map: map,
	//- 					position: new google.maps.LatLng(lat, lng),
	//- 					title: address
	//- 				});

	//- 				// Draw InfoBox
	//- 				var mapInfobox = new InfoBox({
	//- 					content: document.getElementById('address'),
	//- 					disableAutoPan: false,
	//- 					maxWidth: 150,
	//- 					pixelOffset: new google.maps.Size(10, 0),
	//- 					zIndex: null,
	//- 					boxStyle: {
	//- 						background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat",
	//- 						opacity: 0.75,
	//- 						width: '130px'
	//- 					},
	//- 					closeBoxMargin: "-8px 4px 2px 2px",
	//- 					closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
	//- 					infoBoxClearance: new google.maps.Size(1, 1)
	//- 				});
	//- 				mapInfobox.open(map, mapMarker);

	//- 				// Comment this if you don't want a listener.
	//- 				google.maps.job.addListener(mapMarker, 'click', function() {
	//- 					mapInfobox.open(map, mapMarker);
	//- 				});
	//- 			}
	//- 		});
	//- 	});
